#!/usr/local/bin/perl
# $Header: /cvs/fluid/fluid/lib/perl/gen-loadopclasses,v 1.2 2005/06/30 20:36:48 chance Exp $

# This Perl script generates the "Load*.java" source code files
# in various directories in the fluid source code tree.
# It creates declarations for every OP file in the directory it is
# executed in. The generated class goes to stdout.

# Usage: gen-loadopclasses [package name] [class name]

print "// Generated by Ant. Do not edit.\n";
print "package $ARGV[0];\n";
print "\@SuppressWarnings(\"all\")";
print "public class $ARGV[1] {\n";

my @opfiles = glob("*.op");
foreach $f (@opfiles)
{
  $f = substr($f,0,rindex($f,".op"));
  print "  private static $f x$f = $f.prototype;\n";
}

print "}\n";

END {close(STDOUT) or die "couldn't close STDOUT: $!" }
