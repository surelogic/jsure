<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
	<extension point="org.eclipse.ui.preferencePages">
		<page name="JSure"
			class="com.surelogic.jsure.client.eclipse.preferences.JSurePreferencePage"
			id="com.surelogic.jsure.client.eclipse.preferences.JSurePreferencePage">
		</page>
		<page name="Analyses" class="com.surelogic.jsure.client.eclipse.preferences.AnalysisSelectionPreferencePage"
			id="edu.cmu.cs.fluid.dc.PreferencePage"
			category="com.surelogic.jsure.client.eclipse.preferences.JSurePreferencePage">
		</page>
	</extension>

	<extension point="org.eclipse.ui.views">
		<category name="JSure" id="edu.cmu.cs.fluid.dcf"></category>

		<view name="Verification Status"
			icon="platform:/plugin/com.surelogic.common/lib/images/link.gif"
			category="edu.cmu.cs.fluid.dcf" class="com.surelogic.jsure.client.eclipse.views.results.PersistentResultsView"
			id="com.surelogic.jsure.client.eclipse.views.results.PersistentResultsView">
		</view>

        <!--
		<view name="Verification Status (Old)"
			icon="platform:/plugin/com.surelogic.common/lib/images/jsure_logo.gif"
			category="edu.cmu.cs.fluid.dcf" class="edu.cmu.cs.fluid.dcf.views.coe.ResultsView"
			id="edu.cmu.cs.fluid.dcf.views.coe.ResultsView">
		</view>

		<view name="JSure Verification Status Diffs"
			icon="platform:/plugin/com.surelogic.common/lib/images/link.gif"
			category="edu.cmu.cs.fluid.dcf" class="edu.cmu.cs.fluid.dcf.views.coe.DiffResultsView"
			id="edu.cmu.cs.fluid.dcf.views.coe.DiffResultsView">
		</view>
        
		<view name="JSure Verification Metrics"
			icon="platform:/plugin/com.surelogic.common/lib/images/link.gif"
			category="edu.cmu.cs.fluid.dcf" class="edu.cmu.cs.fluid.dcf.views.metrics.MetricsView"
			id="edu.cmu.cs.fluid.dcf.views.coe.MetricsView">
		</view>

		<view name="FAST Viewer" category="edu.cmu.cs.fluid.dcf"
			class="edu.cmu.cs.fluid.dcf.views.ast.FastViewer" id="edu.cmu.cs.fluid.dcf.views.ast.FastViewer">
		</view>
        -->
        
		<view name="JSure Problems"
			icon="platform:/plugin/com.surelogic.common/lib/images/red_x.gif"
			category="edu.cmu.cs.fluid.dcf" class="com.surelogic.jsure.client.eclipse.views.results.JSureProblemsView"
			id="com.surelogic.jsure.client.eclipse.views.results.JSureProblemsView">
		</view>

		<view name="Modeling Problems"
			icon="platform:/plugin/com.surelogic.common/lib/images/jsure_model_problems.gif"
			category="edu.cmu.cs.fluid.dcf" class="com.surelogic.jsure.client.eclipse.views.results.ProblemsView"
			id="com.surelogic.jsure.client.eclipse.views.results.ProblemsView">
		</view>

		<view name="Proposed Promises"
			icon="platform:/plugin/com.surelogic.common/lib/images/annotation_proposed.gif"
			category="edu.cmu.cs.fluid.dcf" class="com.surelogic.jsure.client.eclipse.views.results.ProposedPromiseView"
			id="com.surelogic.jsure.client.eclipse.views.results.ProposedPromiseView">
		</view>
		
	</extension>

	<!-- JSure perspective links and Java perspective links -->

	<extension point="org.eclipse.ui.perspectives">
		<perspective name="Code Verification"
			icon="platform:/plugin/com.surelogic.common/lib/images/jsure_logo.gif"
			class="com.surelogic.jsure.client.eclipse.perspectives.CodeVerificationPerspective"
			id="com.surelogic.jsure.client.eclipse.perspectives.CodeVerificationPerspective">
		</perspective>
	</extension>

	<extension point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension
			targetID="com.surelogic.jsure.client.eclipse.perspectives.CodeVerificationPerspective">
			<perspectiveShortcut id="org.eclipse.jdt.ui.JavaPerspective">
			</perspectiveShortcut>
			<viewShortcut id="com.surelogic.jsure.client.eclipse.views.results.PersistentResultsView">
			</viewShortcut>
			<viewShortcut id="com.surelogic.jsure.client.eclipse.views.results.ProblemsView">
			</viewShortcut>
			<viewShortcut id="com.surelogic.jsure.client.eclipse.views.results.ProposedPromiseView">
			</viewShortcut>
		</perspectiveExtension>
	</extension>

	<extension point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension targetID="org.eclipse.jdt.ui.JavaPerspective">
			<perspectiveShortcut
				id="com.surelogic.jsure.client.eclipse.perspectives.CodeVerificationPerspective">
			</perspectiveShortcut>
		</perspectiveExtension>
	</extension>

	<!-- JSure menus -->

	<extension point="org.eclipse.ui.actionSets">
		<actionSet label="JSure ActionSet" visible="true"
			id="com.surelogic.jsure.client.eclipse.workbenchActionSet">
			<menu id="com.surelogic.jsure.client.eclipse.workbenchMenu"
				label="JSure" path="additions">

				<groupMarker name="client" />
				<separator name="service" />
				<separator name="license" />
				<separator name="additions" />
			</menu>

			<action
				class="com.surelogic.jsure.client.eclipse.actions.OpenCodeVerificationPerspectiveAction"
				id="com.surelogic.jsure.client.eclipse.actions.ShowCodeVerificationPerspectiveAction"
				icon="platform:/plugin/com.surelogic.common/lib/images/jsure_logo.gif"
				label="Open Code Verification Perspective"
				tooltip="Open the Code Verification perspective to examine JSure tool results"
				menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/client">
			</action>
			
			<action
				class="com.surelogic.jsure.client.eclipse.actions.SavePromisesLibraryAsAction"
				id="com.surelogic.jsure.client.eclipse.actions.SavePromisesLibraryAsAction"
				icon="platform:/plugin/com.surelogic.common/lib/images/jar_saveas.gif"
				label="Save Promises Library As..."
				tooltip="Save a copy of the promises library to the disk"
				menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/client">
			</action>

			<action
				class="com.surelogic.jsure.client.eclipse.actions.AddUpdatePromisesLibraryAction"
				id="com.surelogic.jsure.client.eclipse.actions.AddUpdatePromisesLibraryAction"
				icon="platform:/plugin/com.surelogic.common/lib/images/jar.gif"
				label="Add/Update Promises Library in Project"
				tooltip="Add or update the promises library to a project so that annotations can be added to the project's code"
				menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/client">
			</action>

			<action
				class="com.surelogic.jsure.client.eclipse.actions.NewScanAction"
				id="com.surelogic.jsure.client.eclipse.actions.NewScanAction"
				icon="platform:/plugin/com.surelogic.common/lib/images/jsure_verify.gif"
				label="Verify Project" menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/client">
			</action>

			<action
				class="com.surelogic.jsure.client.eclipse.actions.ManageLicensesAction"
				id="com.surelogic.jsure.client.eclipse.actions.ManageLicensesAction"
				label="Manage SureLogic Licenses" menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/license"
				helpContextId="menu-manage-licenses">
			</action>

			<action
				class="com.surelogic.jsure.client.eclipse.actions.ImportTutorialProjectsAction"
				id="com.surelogic.jsure.client.eclipse.actions.ImportTutorialProjectsAction"
				label="Run JSure Tutorials" menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/service"
				helpContextId="menu-run-jsure-tutorials">
			</action>

			<action
				class="com.surelogic.jsure.client.eclipse.actions.SendProblemAction"
				id="com.surelogic.jsure.client.eclipse.actions.SendProblemAction"
				label="Send Problem Report" menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/service"
				helpContextId="menu-send-problem-report">
			</action>

			<action class="com.surelogic.jsure.client.eclipse.actions.SendTipAction"
				id="com.surelogic.jsure.client.eclipse.actions.SendTipAction" label="Send Tip for Improvement"
				menubarPath="com.surelogic.jsure.client.eclipse.workbenchMenu/service"
				helpContextId="menu-send-tip-for-improvement">
			</action>
		</actionSet>
	</extension>

	<extension point="org.eclipse.ui.commands">
		<category name="JSure" description="Commands for JSure"
			id="com.surelogic.jsure.client.eclipse.actions">
		</category>
		<command name="Verification Status" description="Open verification status window"
			categoryId="com.surelogic.jsure.client.eclipse.actions" id="com.surelogic.jsure.view.client.eclipse.status">
		</command>
	</extension>

	<extension id="dcPopupMenus" point="org.eclipse.ui.popupMenus">
		<objectContribution id="iprojectContribution"
			objectClass="org.eclipse.core.resources.IProject" adaptable="true">

			<menu id="jSureMenu" label="JSure">
				<groupMarker name="nature.grp" />
			</menu>
			
			<action
				id="com.surelogic.jsure.client.eclipse.actions.AddUpdatePromisesLibraryAction"
				class="com.surelogic.jsure.client.eclipse.actions.AddUpdatePromisesLibraryAction"
				label="Add/Update Promises Library in Project"
				icon="platform:/plugin/com.surelogic.common/lib/images/jar.gif"
				menubarPath="jSureMenu/nature.grp"
				enablesFor="1">
			</action>
			<action
				id="com.surelogic.jsure.client.eclipse.actions.NewScanAction"
				class="com.surelogic.jsure.client.eclipse.actions.NewScanAction"
				label="Verify Project"
				icon="platform:/plugin/com.surelogic.common/lib/images/jsure_verify.gif"
				menubarPath="jSureMenu/nature.grp"
				enablesFor="+">
			</action>
		</objectContribution>
	</extension>
</plugin>
